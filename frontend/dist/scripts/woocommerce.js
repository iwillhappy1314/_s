!function(t){"use strict";const e={},o={};e.init=function(){this.ajax_add_to_cart(),this.sticky_cart(),this.sticky_add_to_cat(),this.quick_shop(),this.productBoughtTogetherInit(),this.productBoughtTogetherChangeEvent()},e.ajax_add_to_cart=function(){const e=t("body");e.on("submit","form.cart",(function(e){const o=t(this).parents(".type-product");if(o.hasClass("product-type-external")||o.hasClass("product-type-grouped"))return;e.preventDefault();let c=t(this).find(".single_add_to_cart_button"),a=t(this).serialize();return a+="&action=wprs_wc_ajax_add_to_cart",c.val()&&(a+="&add-to-cart="+c.val()),c.removeClass("added not-added"),c.addClass("loading"),t.ajax({url:_s_ajax_obj.ajaxurl,data:a,method:"POST",success:function(e){if(e.redirect_url)window.location=e.redirect_url;else{t(document.body).trigger("adding_to_cart",[c,a]),c.removeClass("loading");const o=e.fragments;o&&(t.each(o,(function(e){t(e).addClass("updating")})),t.each(o,(function(e,o){t(e).replaceWith(o)}))),0<e.notices.indexOf("error")?(t("body").append(e.notices),c.addClass("not-added")):c.addClass("added")}}}),!1})),e.on("adding_to_cart",(function(t,o,c){e.toggleClass("drawer-open")}))},e.quick_shop=function(){t("body").on("click",".rswc_quick_buy_button",(function(){const e=t(this),o=t(this).attr("data-product-id"),c=(t(this).attr("data-product-type"),t("form.cart input#rswc_quick_buy_product_"+o).parents("form.cart")),a=c.find('[type="submit"]');a.is(":disabled")?t("html, body").animate({scrollTop:a.offset().top-200},900):(e.hasClass("disable")||c.append('<input type="hidden" value="true" name="rswc_quick_buy" />'),document.getElementsByClassName("single_add_to_cart_button")[0].click())})),t("form.cart").change((function(){t(this).find('[type="submit"]').is(":disabled")?t(".rswc_quick_buy_button").attr("disabled","disable"):t(".rswc_quick_buy_button").removeAttr("disabled")}))},e.sticky_cart=function(){t(".single-product form.cart").attr("id","sticky-scroll"),t('a.variable-grouped-sticky[href*="#"]').on("click",(function(e){e.preventDefault(),t("html, body").animate({scrollTop:t(t(this).attr("href")).offset().top-80},500,"linear")}))},e.productBoughtTogetherInit=function(){const e=this;t("body").on("click",".rswc-bt-products .product-checkbox input[type=checkbox]",(function(){t(this).is(":checked")?t(this).closest(".product-wrapper").removeClass("kapee-disable-product"):t(this).closest(".product-wrapper").addClass("kapee-disable-product"),e.productBoughtTogetherChangeEvent()})),e.productBoughtTogetherCheckAllItems(),e.productBoughtTogetherAddToCart()},e.productBoughtTogetherChangeEvent=function(){const e=t(".add-items-to-cart"),o=this.pbt_get_total_price(),c=this.product_addons_get_total_price(),a=this.pbt_product_count();e.addClass("loading"),a?t(".add-items-to-cart").removeAttr("disabled"):t(".add-items-to-cart").attr("disabled",!0),t(".addons-item .addon-count").html(a),t(".addons-item span.items-price").html(this.rswc_woo_format_price(c)),t(".items-total span.total-price").html(this.rswc_woo_format_price(o)),e.removeClass("loading")},e.productBoughtTogetherCheckAllItems=function(){const e=this;t("body").on("click",".check-all-items",(function(){t(".kapee-together-product:checkbox").not(this).prop("checked",this.checked),t(this).is(":checked")?t(".kapee-together-product:checkbox").prop("checked",!0):t(".kapee-together-product:checkbox").prop("checked",!1),e.productBoughtTogetherChangeEvent()}))},e.productBoughtTogetherAddToCart=function(){const e=this;t("body").on("click",".add-items-to-cart:not(.loading)",(function(c){c.preventDefault();const a=t(this);a.addClass("loading");const s=e.pbt_get_checked_product_ids();let r="";0===s.length?r=o.bought_together_error:setTimeout((function(){for(var o=0;o<s.length;o++)t.ajax({type:"POST",async:!1,url:_s_ajax_obj.ajaxurl,data:{product_id:s[o],action:"woocommerce_add_to_cart"},success:function(t){e.pbt_refresh_fragments(t)}});t("body").hasClass("drawer-open")||t(document.body).trigger("adding_to_cart",[t(".add-items-to-cart:not(.loading)"),{}]),a.removeClass("loading")}),300),""!==r&&(t(".rswc-message").html(r).show(100),a.removeClass("loading"),setTimeout((function(){t(".rswc-message").slideUp(500)}),3e3))}))},e.pbt_get_total_price=function(){let e=0,o=0;return o=t(".items-total-price .item-price").data("item_price"),e=parseFloat(o),t(".rswc-bt-products .product-checkbox input[type=checkbox]").each((function(){t(this).is(":checked")&&(e+=parseFloat(t(this).data("price")))})),e},e.product_addons_get_total_price=function(){let e=0;return t(".rswc-bt-products .product-checkbox input[type=checkbox]").each((function(){t(this).is(":checked")&&(e+=parseFloat(t(this).data("price")))})),e},e.pbt_product_count=function(){let e=0;return t(".rswc-bt-products .product-checkbox input[type=checkbox]").each((function(){t(this).is(":checked")&&e++})),e},e.pbt_get_checked_product_ids=function(){let e,o=[];return e=t(".items-total-price .item-price").data("id"),o.push(e),t(".rswc-bt-products .product-checkbox input[type=checkbox]").each((function(){t(this).is(":checked")&&o.push(t(this).data("id"))})),o},e.pbt_refresh_fragments=function(e){const o=e.fragments;o&&t.each(o,(function(e){t(e).addClass("updating")})),o&&t.each(o,(function(e,o){t(e).replaceWith(o)}))},e.rswc_woo_format_price=function(t){return this.rswc_format_price(t,o.price_thousand_separator,o.price_decimal_separator,o.price_decimals,o.currency_symbol,o.price_format)},e.rswc_format_price=function(t,e,o,c,a,s){let r="",i="";t=t||0,c=isNaN(c=Math.abs(c))?2:c,a=void 0!==a?a:"$",e=e||",",o=o||".";let d=t<0?"-":"",n=parseInt(t=Math.abs(+t||0).toFixed(c),10)+"",u=n.length;switch(u>3?u%=3:u=0,a='<span class="woocommerce-Price-currencySymbol">'+a+"</span>",s){case"%1$s%2$s":r+=a;break;case"%1$s %2$s":r+=a+" ";break;case"%2$s%1$s":i+=a;break;case"%2$s %1$s":i+=" "+a;break;default:r+=a}let p=r+d+(u?n.substr(0,u)+e:"")+n.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+e)+(c?o+Math.abs(t-n).toFixed(c).slice(2):"")+i;return p='<span class="woocommerce-Price-amount amount">'+p+"</span>",p},e.sticky_add_to_cat=function(){if(t(".js-sticky-add-to-cart").length){var e=t(".rswc-product-hero").offset().top;t(window).scroll((function(o){t(window).scrollTop()+e>=t(".product_title").offset().top?t(".js-sticky-add-to-cart").addClass("visible"):t(".js-sticky-add-to-cart").removeClass("visible")})),t(window).scroll()}},t(document).ready((function(){e.init()}))}(jQuery);