!function(t){"use strict";const e={},c={};e.init=function(){this.ajax_add_to_cart(),this.sticky_cart(),this.quick_shop(),this.productBoughtTogetherInit(),this.productBoughtTogetherChangeEvent()},e.ajax_add_to_cart=function(){const e=t("body");e.on("submit","form.cart",(function(e){const c=t(this).parents(".type-product");if(c.hasClass("product-type-external")||c.hasClass("product-type-grouped"))return;e.preventDefault();let o=t(this).find(".single_add_to_cart_button"),a=t(this).serialize();return a+="&action=wprs_wc_ajax_add_to_cart",o.val()&&(a+="&add-to-cart="+o.val()),o.removeClass("added not-added"),o.addClass("loading"),t.ajax({url:_s_ajax_obj.ajaxurl,data:a,method:"POST",success:function(e){if(e.redirect_url)window.location=e.redirect_url;else{t(document.body).trigger("adding_to_cart",[o,a]),o.removeClass("loading");const c=e.fragments;c&&(t.each(c,(function(e){t(e).addClass("updating")})),t.each(c,(function(e,c){t(e).replaceWith(c)}))),0<e.notices.indexOf("error")?(t("body").append(e.notices),o.addClass("not-added")):o.addClass("added")}}}),!1})),e.on("adding_to_cart",(function(t,c,o){e.toggleClass("drawer-open")}))},e.quick_shop=function(){t("body").on("click",".rswc_quick_buy_button",(function(){const e=t(this),c=t(this).attr("data-product-id"),o=(t(this).attr("data-product-type"),t("form.cart input#rswc_quick_buy_product_"+c).parents("form.cart")),a=o.find('[type="submit"]');a.is(":disabled")?t("html, body").animate({scrollTop:a.offset().top-200},900):(e.hasClass("disable")||o.append('<input type="hidden" value="true" name="rswc_quick_buy" />'),document.getElementsByClassName("single_add_to_cart_button")[0].click())})),t("form.cart").change((function(){t(this).find('[type="submit"]').is(":disabled")?t(".rswc_quick_buy_button").attr("disabled","disable"):t(".rswc_quick_buy_button").removeAttr("disabled")}))},e.sticky_cart=function(){t(".single-product form.cart").attr("id","sticky-scroll"),t('a.variable-grouped-sticky[href*="#"]').on("click",(function(e){e.preventDefault(),t("html, body").animate({scrollTop:t(t(this).attr("href")).offset().top-80},500,"linear")}))},e.productBoughtTogetherInit=function(){const e=this;t("body").on("click",".rswc-bt-products .product-checkbox input[type=checkbox]",(function(){t(this).is(":checked")?t(this).closest(".product-wrapper").removeClass("kapee-disable-product"):t(this).closest(".product-wrapper").addClass("kapee-disable-product"),e.productBoughtTogetherChangeEvent()})),e.productBoughtTogetherCheckAllItems(),e.productBoughtTogetherAddToCart()},e.productBoughtTogetherChangeEvent=function(){const e=t(".add-items-to-cart"),c=this.pbt_get_total_price(),o=this.product_addons_get_total_price(),a=this.pbt_product_count();e.addClass("loading"),a?t(".add-items-to-cart").removeAttr("disabled"):t(".add-items-to-cart").attr("disabled",!0),t(".addons-item .addon-count").html(a),t(".addons-item span.items-price").html(this.rswc_woo_format_price(o)),t(".items-total span.total-price").html(this.rswc_woo_format_price(c)),e.removeClass("loading")},e.productBoughtTogetherCheckAllItems=function(){const e=this;t("body").on("click",".check-all-items",(function(){t(".kapee-together-product:checkbox").not(this).prop("checked",this.checked),t(this).is(":checked")?t(".kapee-together-product:checkbox").prop("checked",!0):t(".kapee-together-product:checkbox").prop("checked",!1),e.productBoughtTogetherChangeEvent()}))},e.productBoughtTogetherAddToCart=function(){const e=this;t("body").on("click",".add-items-to-cart:not(.loading)",(function(o){o.preventDefault();const a=t(this);a.addClass("loading");const r=e.pbt_get_checked_product_ids();let s="";0===r.length?s=c.bought_together_error:setTimeout((function(){for(var c=0;c<r.length;c++)t.ajax({type:"POST",async:!1,url:_s_ajax_obj.ajaxurl,data:{product_id:r[c],action:"woocommerce_add_to_cart"},success:function(t){e.pbt_refresh_fragments(t)}});t("body").hasClass("drawer-open")||t(document.body).trigger("adding_to_cart",[t(".add-items-to-cart:not(.loading)"),{}]),a.removeClass("loading")}),300),""!==s&&(t(".rswc-message").html(s).show(100),a.removeClass("loading"),setTimeout((function(){t(".rswc-message").slideUp(500)}),3e3))}))},e.pbt_get_total_price=function(){let e=0,c=0;return c=t(".items-total-price .item-price").data("item_price"),e=parseFloat(c),t(".rswc-bt-products .product-checkbox input[type=checkbox]").each((function(){t(this).is(":checked")&&(e+=parseFloat(t(this).data("price")))})),e},e.product_addons_get_total_price=function(){let e=0;return t(".rswc-bt-products .product-checkbox input[type=checkbox]").each((function(){t(this).is(":checked")&&(e+=parseFloat(t(this).data("price")))})),e},e.pbt_product_count=function(){let e=0;return t(".rswc-bt-products .product-checkbox input[type=checkbox]").each((function(){t(this).is(":checked")&&e++})),e},e.pbt_get_checked_product_ids=function(){let e,c=[];return e=t(".items-total-price .item-price").data("id"),c.push(e),t(".rswc-bt-products .product-checkbox input[type=checkbox]").each((function(){t(this).is(":checked")&&c.push(t(this).data("id"))})),c},e.pbt_refresh_fragments=function(e){const c=e.fragments;c&&t.each(c,(function(e){t(e).addClass("updating")})),c&&t.each(c,(function(e,c){t(e).replaceWith(c)}))},e.rswc_woo_format_price=function(t){return this.rswc_format_price(t,c.price_thousand_separator,c.price_decimal_separator,c.price_decimals,c.currency_symbol,c.price_format)},e.rswc_format_price=function(t,e,c,o,a,r){let s="",i="";t=t||0,o=isNaN(o=Math.abs(o))?2:o,a=void 0!==a?a:"$",e=e||",",c=c||".";let d=t<0?"-":"",n=parseInt(t=Math.abs(+t||0).toFixed(o),10)+"",u=n.length;switch(u>3?u%=3:u=0,a='<span class="woocommerce-Price-currencySymbol">'+a+"</span>",r){case"%1$s%2$s":s+=a;break;case"%1$s %2$s":s+=a+" ";break;case"%2$s%1$s":i+=a;break;case"%2$s %1$s":i+=" "+a;break;default:s+=a}let p=s+d+(u?n.substr(0,u)+e:"")+n.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+e)+(o?c+Math.abs(t-n).toFixed(o).slice(2):"")+i;return p='<span class="woocommerce-Price-amount amount">'+p+"</span>",p},t(document).ready((function(){e.init()}))}(jQuery);